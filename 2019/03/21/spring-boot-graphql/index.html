<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet"/><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous"/><style data-href="/commons.131b48b25a50eff60b34.css">code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}</style><meta name="generator" content="Gatsby 2.15.19"/><style type="text/css">.gatsby-resp-image-image{width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;color:transparent;}</style><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><style data-styled="hTmxqc lcZENV lfoWPa hPmQYh dANmgz brBAvj hpDnww bWPqAN gEMFDS eyJpws cmRrYK hwkicN iTdcdb jRHVYT kQWgFX itRnbT jNHeyA hFicPH" data-styled-version="4.3.2">
/* sc-component-id: SideMenu__StyledBurgerMenu-uekpe8-0 */
.hTmxqc .bm-burger-button{position:fixed;width:36px;height:30px;left:36px;top:36px;} .hTmxqc .bm-burger-bars{background:#ffffff;} .hTmxqc .bm-cross-button{height:24px;width:24px;} .hTmxqc .bm-cross{background:#ffffff;} .hTmxqc .bm-menu{background:rgb(0,0,0,0.5);padding:2.5em 1em 0;font-size:1.15em;} .hTmxqc .bm-morph-shape{fill:#373a47;} .hTmxqc .bm-item-list{padding-top:2em;} .hTmxqc .bm-item{display:inline-block;padding:0.5em;} .hTmxqc .bm-overlay{background:rgba(0,0,0,0.3);}
/* sc-component-id: SideMenu__MenuLink-uekpe8-1 */
.lcZENV{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#fff;border:0;margin:0;margin-right:0.5rem;padding-left:20px;padding-right:20px;min-width:42px;z-index:10;}
/* sc-component-id: Footer__FooterWrapper-sc-1oxe0wr-0 */
.hFicPH{text-align:left;padding-top:30px;padding-bottom:50px;background-color:rgba(32,35,42,0.85);color:#ffffff;padding-left:20px;padding-right:20px;margin:3.5em auto 0 0;} .hFicPH nav{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row wrap;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;max-width:900px;margin:0 auto;} .hFicPH nav .footer-col{-webkit-flex:1 auto;-ms-flex:1 auto;flex:1 auto;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin-bottom:1em;padding-right:1em;} .hFicPH a{color:#ffffff;font-weight:bold;} .hFicPH a:hover{color:#e8e8e8;border-bottom:1px dotted #e8e8e8;} .hFicPH .footer-col > p{margin:0;} .hFicPH .footer-title{margin:0 0 1rem;} .hFicPH .footer-item{padding:0.25rem 0;color:#ffffff;} .hFicPH .footer-heart{color:red;} .hFicPH .footer-item-text{padding:0.1rem 0;color:#ffffff;} .hFicPH .footer-header{-webkit-order:1;-ms-flex-order:1;order:1;margin:0 0.25rem;margin-right:0.25rem;padding:0.25rem;} @media (max-width:564px){.hFicPH .footer-col:first-child{width:100%;}}
/* sc-component-id: sc-global-3886539976 */
*{box-sizing:border-box;margin:0;padding:0;} body{font-family:"Lato",sans-serif;color:#222222cc;background-color:#e8e8e8;} img{max-width:100%;height:auto;vertical-align:middle;border:0;} a{-webkit-text-decoration:none;text-decoration:none;color:rgba(34,34,34,0.8);} ul,ol{padding-left:2em;margin:1em 0 0 0;}
/* sc-component-id: Wrapper-aej7i5-0 */
.hwkicN{position:relative;border-radius:3px;width:80%;max-width:770px;border-bottom:1px solid #ebf2f6;word-wrap:break-word;background-color:#fff;margin:0px auto 30px auto;top:30px;padding:50px;box-shadow:0 0 0 0,0 6px 12px rgba(0,0,0,0.1);} @media (max-width:780px){.hwkicN{width:90%;padding:25px;}}
/* sc-component-id: Hero__HeroContainer-sc-1i1rqpz-0 */
.lfoWPa{position:relative;display:table;width:100%;height:340px;overflow:hidden;background-repeat:no-repeat;background-position:center;background-size:cover;}
/* sc-component-id: Hero__TitleContainer-sc-1i1rqpz-1 */
.hPmQYh{display:table-cell;vertical-align:middle;text-align:center;width:100%;}
/* sc-component-id: Hero__LocationContainer-sc-1i1rqpz-2 */
.gEMFDS{display:table-footer-group;vertical-align:center;text-align:right;width:100%;}
/* sc-component-id: Hero__HeroTitle-sc-1i1rqpz-3 */
.dANmgz{font-size:3.5rem;margin:10px 60px;color:#fff;text-shadow:2px 2px #222222;font-weight:800;font-family:'Open Sans','Helvetica Neue',Helvetica,Arial,sans-serif;}
/* sc-component-id: Hero__HeroSubtitle-sc-1i1rqpz-4 */
.brBAvj{font-size:1.7rem;margin:10px 60px;color:#fff;text-shadow:2px 2px #222222;font-family:'Open Sans','Helvetica Neue',Helvetica,Arial,sans-serif;}
/* sc-component-id: Hero__DateAndAuthor-sc-1i1rqpz-5 */
.hpDnww{font-weight:500;font-size:1.2rem;color:#fff;text-shadow:2px 2px #222222;}
/* sc-component-id: Hero__AuthorLink-sc-1i1rqpz-6 */
.bWPqAN{margin-left:0.3rem;font-weight:500;font-size:1.2rem;color:#fff;text-shadow:2px 2px #222222;} .bWPqAN:hover{border-bottom:1px dotted #787676;} .bWPqAN:before{content:'@';}
/* sc-component-id: Hero__LocationLink-sc-1i1rqpz-7 */
.cmRrYK{margin-right:0.7rem;font-size:0.9rem;color:#fff;text-shadow:2px 2px #222222;font-size:1rem;font-family:'Open Sans','Helvetica Neue',Helvetica,Arial,sans-serif;font-style:italic;} .cmRrYK:hover{border-bottom:1px dotted #787676;}
/* sc-component-id: Hero__LocationMarker-sc-1i1rqpz-8 */
.eyJpws{margin-right:0.4rem;font-size:0.75rem;color:#fff;text-shadow:2px 2px #222222;font-family:'Open Sans','Helvetica Neue',Helvetica,Arial,sans-serif;}
/* sc-component-id: TagList__ListContainer-sc-1uj42o2-0 */
.kQWgFX{display:inline;margin:0 0.5rem 0 0;color:#787676;}
/* sc-component-id: TagList__TagListItem-sc-1uj42o2-1 */
.itRnbT{margin-left:0.3rem;display:inline-block;min-width:10px;padding:3px 7px;font-size:12px;font-weight:700;line-height:1;color:#fff;text-align:center;white-space:nowrap;vertical-align:middle;background-color:#777;border-radius:10px;} .itRnbT:hover{border-bottom:1px dotted #787676;}
/* sc-component-id: ContentHeader__Header-sc-1uw779c-0 */
.jRHVYT{margin-bottom:2rem;color:#787676;}
/* sc-component-id: Content__ContentBody-sc-1jppj8x-0 */
.jNHeyA{line-height:1.6;} .jNHeyA > *:first-child{padding-top:0;margin-top:0;} .jNHeyA > h1{margin-top:3rem;font-size:2em;} .jNHeyA > h2{margin-top:3rem;font-size:1.5em;} .jNHeyA > h3{padding-top:3rem;font-size:1.17em;} .jNHeyA > p{margin:1em 0 0 0;} .jNHeyA a{border-bottom:1px dotted rgba(162,162,162,0.8);} .jNHeyA a:hover{border-bottom-style:solid;} .jNHeyA a.anchor,.jNHeyA a.gatsby-resp-image-link{border:none;} .jNHeyA > blockquote{box-sizing:border-box;margin:1.75em 0 1.75em -2.2em;padding:0 0 0 1.75em;border-left:0.4em solid rgba(32,35,42,0.85);} .jNHeyA > blockquote p{margin:0.8em 0;font-style:italic;} .jNHeyA .gatsby-highlight{border-radius:5px;font-size:15px;line-height:1.7;background:#2d2d2d;color:#ffffff;border-radius:10px;overflow:auto;tab-size:1.5em;margin:1.5em 0em 1.5em 0;font-size:0.7em;} .jNHeyA .gatsby-highlight > pre{border:0;margin:0;padding:1;} .jNHeyA .gatsby-highlight-code-line{background-color:#022a4b;display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:0.75em;border-left:0.25em solid #ffa7c4;} .jNHeyA p > code.language-text,.jNHeyA li > code.language-text{background:rgba(255,229,100,0.2);color:#222222cc;padding:0 3px;font-size:0.94em;border-radius:0.3rem;} .jNHeyA table{margin-top:1em;border-collapse:collapse;border-radius:0.5em;overflow:hidden;} .jNHeyA table th,.jNHeyA table td{padding:0.5em;background:#e8e8e8;border-bottom:2px solid white;} .jNHeyA:not(pre) a code[class*='language-']{color:#222222cc;background-color:rgba(255,229,100,0.2);}
/* sc-component-id: Article__ArticleWrapper-sc-1nyoqfc-0 */
.iTdcdb{padding:0 30px 30px;} @media only screen and (max-width:500px){.iTdcdb{padding:0;}}</style><title data-react-helmet="true">GraphQL + Spring Boot | 040code</title><link data-react-helmet="true" rel="canonical" href="https://040code.github.io/2019/03/21/spring-boot-graphql"/><meta data-react-helmet="true" name="description" content="Introduction Now GraphQL is not anymore that new kid on a block it would be nice if we can implement a service with a GraphQL interface‚Ä¶"/><meta data-react-helmet="true" property="og:url" content="https://040code.github.io/2019/03/21/spring-boot-graphql"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="GraphQL + Spring Boot | 040code"/><meta data-react-helmet="true" property="og:description" content="Introduction Now GraphQL is not anymore that new kid on a block it would be nice if we can implement a service with a GraphQL interface‚Ä¶"/><meta data-react-helmet="true" property="og:image" content="https://040code.github.io/static/2019-03-21-spring-boot-graphql-fb-502d44ccc8d0aaa287b8970d293c1d4e.png"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="niekos77"/><meta data-react-helmet="true" name="twitter:title" content="GraphQL + Spring Boot | 040code"/><meta data-react-helmet="true" name="twitter:description" content="Introduction Now GraphQL is not anymore that new kid on a block it would be nice if we can implement a service with a GraphQL interface‚Ä¶"/><meta data-react-helmet="true" name="twitter:image" content="https://040code.github.io/static/2019-03-21-spring-boot-graphql-tw-2957ea29d47a08f6200f67cbafbb8ec3.png"/><link rel="shortcut icon" href="/icons/icon-48x48.png?v=008654519ce705ac7bc44303a9014606"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#222222"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=008654519ce705ac7bc44303a9014606"/><link as="script" rel="preload" href="/app-5643697e2de9bcce0385.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-658161403c49a8a1208a.js"/><link as="script" rel="preload" href="/commons-7e3c10fcd1b3528eff3a.js"/><link as="script" rel="preload" href="/webpack-runtime-13449825e32741877b57.js"/><link as="fetch" rel="preload" href="/page-data/2019/03/21/spring-boot-graphql/page-data.json" crossorigin="anonymous"/></head><body><noscript>This site runs best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="SideMenu__StyledBurgerMenu-uekpe8-0 hTmxqc"><div><div class="bm-overlay" style="position:fixed;z-index:1000;width:100%;height:100%;background:rgba(0, 0, 0, 0.3);opacity:0;-moz-transform:translate3d(100%, 0, 0);-ms-transform:translate3d(100%, 0, 0);-o-transform:translate3d(100%, 0, 0);-webkit-transform:translate3d(100%, 0, 0);transform:translate3d(100%, 0, 0);transition:opacity 0.3s, transform 0s 0.3s"></div><div id="" class="bm-menu-wrap" style="position:fixed;right:inherit;z-index:1100;width:300px;height:100%;-moz-transform:translate3d(-100%, 0, 0);-ms-transform:translate3d(-100%, 0, 0);-o-transform:translate3d(-100%, 0, 0);-webkit-transform:translate3d(-100%, 0, 0);transform:translate3d(-100%, 0, 0);transition:all 0.5s"><div class="bm-menu" style="height:100%;box-sizing:border-box;overflow:auto"><nav class="bm-item-list" style="height:100%"><a class="bm-item SideMenu__MenuLink-uekpe8-1 lcZENV" style="display:block" tabindex="-1" href="/">üè° 040 blog</a><a class="bm-item SideMenu__MenuLink-uekpe8-1 lcZENV" style="display:block" tabindex="-1" href="/about">About</a><a class="bm-item SideMenu__MenuLink-uekpe8-1 lcZENV" style="display:block" tabindex="-1" href="/authors/niek">Niek Palm</a><a class="bm-item SideMenu__MenuLink-uekpe8-1 lcZENV" style="display:block" tabindex="-1" href="/authors/maarten">Maarten Metz</a><a class="bm-item SideMenu__MenuLink-uekpe8-1 lcZENV" style="display:block" tabindex="-1" href="/authors/jeroen">Jeroen Knoops</a><a class="bm-item SideMenu__MenuLink-uekpe8-1 lcZENV" style="display:block" tabindex="-1" href="/authors/stefan">Stefan van den Oord</a></nav></div><div><div class="bm-cross-button" style="position:absolute;width:24px;height:24px;right:8px;top:8px"><span style="position:absolute;top:6px;right:14px"><span class="bm-cross" style="position:absolute;width:3px;height:14px;transform:rotate(45deg)"></span><span class="bm-cross" style="position:absolute;width:3px;height:14px;transform:rotate(-45deg)"></span></span><button style="position:absolute;left:0;top:0;width:100%;height:100%;margin:0;padding:0;border:none;font-size:0;background:transparent;cursor:pointer" tabindex="-1">Close Menu</button></div></div></div><div><div class="bm-burger-button" style="z-index:1000"><span><span class="bm-burger-bars" style="position:absolute;height:20%;left:0;right:0;top:0%;opacity:1"></span><span class="bm-burger-bars" style="position:absolute;height:20%;left:0;right:0;top:40%;opacity:1"></span><span class="bm-burger-bars" style="position:absolute;height:20%;left:0;right:0;top:80%;opacity:1"></span></span><button style="position:absolute;left:0;top:0;width:100%;height:100%;margin:0;padding:0;border:none;font-size:0;background:transparent;cursor:pointer">Open Menu</button></div></div></div></div><div style="margin:0 0"><div style="background-image:url(&quot;/static/glow-lichttoren-fe8d25eaf57ff60b161ea35ae76cc12b.jpg&quot;)" class="Hero__HeroContainer-sc-1i1rqpz-0 lfoWPa"><div class="Hero__TitleContainer-sc-1i1rqpz-1 hPmQYh"><h1 class="Hero__HeroTitle-sc-1i1rqpz-3 dANmgz">GraphQL + Spring Boot</h1><h2 class="Hero__HeroSubtitle-sc-1i1rqpz-4 brBAvj">Queries, mutations and subscription in Java</h2><span class="Hero__DateAndAuthor-sc-1i1rqpz-5 hpDnww">by:<!-- --> <a class="Hero__AuthorLink-sc-1i1rqpz-6 bWPqAN" href="/authors/niek">niek</a>¬† on <!-- -->2019-03-21</span></div><div class="Hero__LocationContainer-sc-1i1rqpz-2 gEMFDS"><span class="Hero__LocationMarker-sc-1i1rqpz-8 eyJpws"><span class="fa fa-map-marker-alt"></span></span><a href="https://goo.gl/maps/CjRDKs3VRKv" target="_blank" class="Hero__LocationLink-sc-1i1rqpz-7 cmRrYK">Glow 2018 - Lichttoren</a></div></div><main role="main" class="Wrapper-aej7i5-0 hwkicN"><article class="Article__ArticleWrapper-sc-1nyoqfc-0 iTdcdb"><section><header class="ContentHeader__Header-sc-1uw779c-0 jRHVYT"><div class="TagList__ListContainer-sc-1uj42o2-0 kQWgFX"><a class="w3-round-size TagList__TagListItem-sc-1uj42o2-1 itRnbT" href="/tags/graphql">graphql</a> <a class="w3-round-size TagList__TagListItem-sc-1uj42o2-1 itRnbT" href="/tags/spring">spring</a> <a class="w3-round-size TagList__TagListItem-sc-1uj42o2-1 itRnbT" href="/tags/java">java</a></div></header><div class="Content__ContentBody-sc-1jppj8x-0 jNHeyA"><h3 id="introduction"><a href="#introduction" aria-label="introduction permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h3>
<p>Now GraphQL is not anymore that new kid on a block it would be nice if we can implement a service with a GraphQL interface. Spring Boot is one of the well known frameworks to build your micro services in Java. Time to assess how easy, or hard it will be to implement a GraphQL service. In this post we will not explain how <a href="https://graphql.org/">GraphQL</a> works. We focus on a simple Java Spring Boot micro services with a JPA layer. In the GraphQL language we cover the tree major concepts, a query, a mutation and a subscription.</p>
<p>GraphQL is API is based on three main concepts. Query the backend for data using a graph based query. The query is in a JSON like style and the response is valid JSON. A major difference with REST is that wit a query you can specify excatly what you expect or want from the backend. Mutation are the way to change data in the system based on flat input object. In this example we use mutation to add new information. Finally we have subscription to subscribe for changes and get notified once something is changed via a web socket.</p>
<h3 id="java-spring-and-graphql"><a href="#java-spring-and-graphql" aria-label="java spring and graphql permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Java, Spring and GraphQL.</h3>
<p>For implementing a GraphQL service you have two choices. Either schema first, or code first. So similar concepts as we used with SOA XML services. When starting with code you have to write more plumbing code, but you have more freedom. And on the other side starting of the schema reduce all the plumbing code and gives a faster start.</p>
<p>In this blog we first create a simple JPA enabled Spring Boot service. Then we add step-by-step GraphQL features to the service. We start from the schema and show which small additions you have to do to our application. Starting from a schema will not result in generated coded, you still have to write the matching code yourself. For the Java implementation we will use the libraries from <a href="https://github.com/graphql-java-kickstart">graphql-java-kickstart</a>.</p>
<h3 id="sample-model-and-api"><a href="#sample-model-and-api" aria-label="sample model and api permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sample Model and API</h3>
<p>For simplicity we use in this blog a simple domain model. Consisting of two classes. A person and notes, a person can have multiple notes. And a note always has one author, a person.</p>
<a href="#">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 113px;">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 180.5309734513274%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,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&apos;); background-size: cover; display: block;"></span>
  <picture>
        <source srcset="/static/8c7e152322e9f76ea8548483ef3a27da/2d1df/model.webp 113w" sizes="(max-width: 113px) 100vw, 113px" type="image/webp">
        <source srcset="/static/8c7e152322e9f76ea8548483ef3a27da/ae69b/model.png 113w" sizes="(max-width: 113px) 100vw, 113px" type="image/png">
        <img class="gatsby-resp-image-image" src="/static/8c7e152322e9f76ea8548483ef3a27da/ae69b/model.png" alt="Model" title="Model" loading="lazy">
      </picture>
    </span>
</a>
<h3 id="create-a-simple-note-service"><a href="#create-a-simple-note-service" aria-label="create a simple note service permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create a simple Note Service</h3>
<p>First we create a simple Spring JPA services, to store the Notes and the Authors of type Person. The implementation will be straightforward. We create an entity class for Person and Note. Fore readability the imports and other plumbing is omitted. See <a href="https://github.com/npalm/blog-graphql-spring-service">GitHub</a> for a complete implementation.</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Id</span> <span class="token annotation punctuation">@GeneratedValue</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Long</span> id <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>unique <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Note</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Id</span> <span class="token annotation punctuation">@GeneratedValue</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Long</span> id <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> note<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">ZonedDateTime</span> createdOn<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@ManyToOne</span><span class="token punctuation">(</span>fetch <span class="token operator">=</span> <span class="token class-name">FetchType</span><span class="token punctuation">.</span>EAGER<span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Person</span> author<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Next we define two spring JPA repositories to store the entities above in our database.</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Repository</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PersonRepository</span> <span class="token keyword">extends</span> <span class="token class-name">CrudRepository</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">></span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Repository</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">NoteRepository</span> <span class="token keyword">extends</span> <span class="token class-name">CrudRepository</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Note</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Note</span><span class="token punctuation">></span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Finally, we define the services interface which we will use to implement the GraphQL queries,</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">NotesService</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Note</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Note</span> note<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Note</span><span class="token punctuation">></span></span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Note</span><span class="token punctuation">></span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>So that is all to create a simple service with basic JPA (persistence) capacity. Time to focus on adding GraphQL to our service.</p>
<h3 id="implement-a-query"><a href="#implement-a-query" aria-label="implement a query permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implement a query</h3>
<p>As base library we use <code class="language-text">graphql-java-tools</code> this library requires a GraphQL schema to implement GrahpQL. The first step is to define a schema for our queries. The schema defines our GraphQL root, for now only the query. Next the queries we will implement and the types we use. We define two queries. The first one to look op a note and the second one to find all notes based on a filter. Next, we define the types. As you can see a Note has a relation to a Person object. By querying for a note we can get immediately the authors name for example.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">schema {
    query: Query,
}

type Query {
    note(id: Long!): Note
    notes: [Note]
}

# Object to represent a note
type Note {
    id: ID!
    note: String
    createdOn : String
    author: Person
}

# Object to represent a note
type Person {
    id: ID!
    name: String
    email: String
}</code></pre></div>
<h3 id="implement-mutation"><a href="#implement-mutation" aria-label="implement mutation permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implement Mutation</h3>
<p>We have now defined a first version of a GraphQL schema. The second step is to connect the schema to the Note Service. GraphQL java tools expects for each query, a resolver function. Therefore, we need to implement <code class="language-text">GraphQLQueryResolver</code> from graphql-tools.</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span> <span class="token keyword">implements</span> <span class="token class-name">GraphQLQueryResolver</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">NotesService</span> notesService<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Query</span><span class="token punctuation">(</span><span class="token class-name">NotesService</span> notesService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>notesService <span class="token operator">=</span> notesService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Note</span><span class="token punctuation">></span></span> <span class="token function">note</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> notesService<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Note</span><span class="token punctuation">></span></span> <span class="token function">notes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> notesService<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This is all, we have to do to be able to handle the queries as specified in the schema. We can now start the spring boot application and open <a href="http://locahost:8080/graphiql">http://locahost:8080/graphiql</a> and query form some. Graphiql is a simple IDE to execute GraphQL queries. A much richer tool to play with your queries is <a href="https://github.com/prisma/graphql-playground">GraphQL Playground</a>. Actually no fun yet, we can only execute queries without getting any result. We simply have an empty system. We need a way to add notes to the system. In GraphQL you mutate data via a mutation. In the next step we add a mutation to the schema and update the code for executing the mutation.</p>
<p>In the schema we add the mutation to the root and add a mutation to add a note to the <code class="language-text">Mutation</code> type. Quite similar to defining the query above. For the input we define an input object for both Note and Person.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">schema {
    ...
    mutation: Mutation
}

type Mutation {
    addNote(note: InputNote!, author: InputPerson!): Note
}

# Input type for the author of the note
input InputPerson {
    name: String!
    email: String
}

# Input type for a new Note
input InputNote {
    note: String!
}</code></pre></div>
<p>Similar to implementing the query we have to implement an interface and declare methods for the mutation. Mutations have to be implemented in a class implementing the interface GraphQLMutationResolver. In this implementation we defined for the input objects converters to convert the GraphQL input object to domain objects that can be consumed by the service.</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Mutation</span> <span class="token keyword">implements</span> <span class="token class-name">GraphQLMutationResolver</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Note</span> <span class="token function">addNote</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">InputNote</span> note<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">InputPerson</span> author<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> notesService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">InputNote</span><span class="token punctuation">.</span><span class="token function">convert</span><span class="token punctuation">(</span>note<span class="token punctuation">,</span> author<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Let‚Äôs test the service. Build and start the service <code class="language-text">/gradlew clean bootRun</code> and open <a href="http://localhost:8080/graphiql">http://localhost:8080/graphiql</a>.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">mutation {
  addNote(note: {note: &quot;Hello World&quot;},
    author: {name: &quot;John Doe&quot;, email: &quot;no-reply@jonn.doe&quot;}) {
    id
  }
}</code></pre></div>
<p>And query for all available notes. This should result only in the note above.</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java">query <span class="token punctuation">{</span>
  notes <span class="token punctuation">{</span>
    id
    createdOn
    note
    author <span class="token punctuation">{</span>
      name
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<a href="#">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 52.910737386804655%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAAA8ElEQVQoz52S2U7DMBBF8/9/B4I3kEJJYlPb8TYeLylxpxGEKG0R4uhqnubE9lWax6fnruvbtuWc76YklBJyjxDi7Z11A29GxgBCSinnvJ2EsUZLBdY559cQNI311rpGSSMN1FrnuicgmkH0h6P1kHKhT16SftJgPr0MukzTlVsRMcR41G5UDo1HQPQYY1rTTNM0+lhOnzflFJPQ/uH1Q/US+hGYRtJXuZRc70BrtOo89MJaC6hc0BDT5uR5nu/KiNRKCFjoweRstC/5VlPfhYVAxVIxl+vTNi75oxyXa+9O28n1/zJjjC/AFfRz/C6fAdy+e3b68vUMAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
  <picture>
        <source srcset="/static/9ff63ab7efb668275ae7734226197070/cc182/query-graphiql.webp 148w,
/static/9ff63ab7efb668275ae7734226197070/f7e40/query-graphiql.webp 295w,
/static/9ff63ab7efb668275ae7734226197070/1a2f4/query-graphiql.webp 590w,
/static/9ff63ab7efb668275ae7734226197070/4837b/query-graphiql.webp 885w,
/static/9ff63ab7efb668275ae7734226197070/2f819/query-graphiql.webp 1180w,
/static/9ff63ab7efb668275ae7734226197070/05a98/query-graphiql.webp 1546w" sizes="(max-width: 590px) 100vw, 590px" type="image/webp">
        <source srcset="/static/9ff63ab7efb668275ae7734226197070/cf440/query-graphiql.png 148w,
/static/9ff63ab7efb668275ae7734226197070/d2d38/query-graphiql.png 295w,
/static/9ff63ab7efb668275ae7734226197070/b9e4f/query-graphiql.png 590w,
/static/9ff63ab7efb668275ae7734226197070/f9b6a/query-graphiql.png 885w,
/static/9ff63ab7efb668275ae7734226197070/2d849/query-graphiql.png 1180w,
/static/9ff63ab7efb668275ae7734226197070/ace41/query-graphiql.png 1546w" sizes="(max-width: 590px) 100vw, 590px" type="image/png">
        <img class="gatsby-resp-image-image" src="/static/9ff63ab7efb668275ae7734226197070/b9e4f/query-graphiql.png" alt="Query example" title="Query example" loading="lazy">
      </picture>
    </span>
</a>
<p>Add some more notes and experiment with the query. All standard features will work such as aliases, fragement and variables.</p>
<h3 id="implement-subscriptions"><a href="#implement-subscriptions" aria-label="implement subscriptions permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implement Subscriptions.</h3>
<p>Another cool feature is the subscriptions. With a subscription you can subscribe to updates via a websocket. The same philosophy is followed for the subscription. You will gat your data in same structure as specified in the subscription call.</p>
<p>To add subscription to our Java implements, we update the schema and add code to handle updates. To add a subscription for new notes we update the GraphQL schema first. Again update schema root and add the subscription, define the available subscriptions and add the required types.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">schema {
    ...
    subscription : Subscription
}

type Subscription {
    # Subscribe to all new comments
    notes: NoteUpdate!
}

type NoteUpdate {
    # The note text
    note : String
    # The name of the author
    authorName : String
    # Time when the note was received
    createdOn : String
}</code></pre></div>
<p>And once again we have to implement a resolver, this time we implement the <code class="language-text">GraphQLSubscriptionResolver</code>.</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">class</span> <span class="token class-name">Subscription</span> <span class="token keyword">implements</span> <span class="token class-name">GraphQLSubscriptionResolver</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">CommentPublisher</span> commentPublisher<span class="token punctuation">;</span>

    <span class="token class-name">Subscription</span><span class="token punctuation">(</span><span class="token class-name">CommentPublisher</span> commentPublisher<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>commentPublisher <span class="token operator">=</span> commentPublisher<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">Publisher</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">NoteUpdate</span><span class="token punctuation">></span></span> <span class="token function">notes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> commentPublisher<span class="token punctuation">.</span><span class="token function">getPublisher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Note</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Note</span> note<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    notePublisher<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span>savedNoed<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The <code class="language-text">notePublisher</code> is responsible to update messages via a WebScoket so the subscribers get the update. For the implementation check out the GitHub repo. Time to test the subscription. An easy way to test is topen the GraphiQL editor on two screens. Invoke in the first one the subscription and in the second one add a note. You will see you get an update of the new note on the first screen.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">subscription {
  notes {
    note
    authorName
  }
}</code></pre></div>
<a href="#">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 55.35055350553506%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABfUlEQVQoz3WRa2+bMBRA/f//UDWp+7CkzbTkaye6VEuIeAewje17/QCcXbJobdftcLCMuJbQgSXJj+R5X1VVlmUFUZZZnpfXx7Zte867vu+X+y1dVlRZXjPJhSgKxYWz3qHzJFiHpAODnAuQChEA0CyCNotKG6U0AwMtVy+nbhAYcJwxRO1n9AFGqwIMuvhZH7JWSm2lwQGcdTedZ1qbGON8iXOMl/dM86x72ZX89FKfT60+NOpwNo00tYBeWzocwnj5DzMd1sY7H6dpDHRNNBx8uDp6P7I0TZMk+f70tN/v0/ccj0fKRi0p41KSWNaKLMqqqRt2f//57u7T+vHxy2r1cGW9Xm82m91utyVoXTa77bftW1Y08nXLpJBD02DfeYRxou+7QdsQAr0FoZbQ1gKJlrIv5Q1Sc2YttsKUZ0nzH4OhhiJt8rwdCg6lMJ2iyH9kWmkfJmE8uPFfwXQ7mLJTgivslOmVRWftTYZo44ef9FdtKuu8t7+1r4d/AY0VZ/3VmK5dAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
  <picture>
        <source srcset="/static/6026081f5abfc5afc1a7ae1bc5b1753b/cc182/subscription-graphiql.webp 148w,
/static/6026081f5abfc5afc1a7ae1bc5b1753b/f7e40/subscription-graphiql.webp 295w,
/static/6026081f5abfc5afc1a7ae1bc5b1753b/1a2f4/subscription-graphiql.webp 590w,
/static/6026081f5abfc5afc1a7ae1bc5b1753b/4837b/subscription-graphiql.webp 885w,
/static/6026081f5abfc5afc1a7ae1bc5b1753b/2f819/subscription-graphiql.webp 1180w,
/static/6026081f5abfc5afc1a7ae1bc5b1753b/5c933/subscription-graphiql.webp 1626w" sizes="(max-width: 590px) 100vw, 590px" type="image/webp">
        <source srcset="/static/6026081f5abfc5afc1a7ae1bc5b1753b/cf440/subscription-graphiql.png 148w,
/static/6026081f5abfc5afc1a7ae1bc5b1753b/d2d38/subscription-graphiql.png 295w,
/static/6026081f5abfc5afc1a7ae1bc5b1753b/b9e4f/subscription-graphiql.png 590w,
/static/6026081f5abfc5afc1a7ae1bc5b1753b/f9b6a/subscription-graphiql.png 885w,
/static/6026081f5abfc5afc1a7ae1bc5b1753b/2d849/subscription-graphiql.png 1180w,
/static/6026081f5abfc5afc1a7ae1bc5b1753b/4c844/subscription-graphiql.png 1626w" sizes="(max-width: 590px) 100vw, 590px" type="image/png">
        <img class="gatsby-resp-image-image" src="/static/6026081f5abfc5afc1a7ae1bc5b1753b/b9e4f/subscription-graphiql.png" alt="Query example" title="Query example" loading="lazy">
      </picture>
    </span>
</a>
<h3 id="testing"><a href="#testing" aria-label="testing permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testing</h3>
<p>Another nice feature provided by <a href="https://github.com/graphql-java-kickstart/graphql-spring-boot">graphql-spring-boot</a> is the test utils. Testing your GraphQL queries becomes really simple. The library provide a <code class="language-text">GraphQLTestTemplate</code> which makes it easy to invoke the GraphQL endpoint by with a query. The result is the JSON object. Let‚Äôs have a quick look on some code. First define the query in <code class="language-text">queries/find-notes.graphql</code>.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">query FindNotes {
  notes {
    id
    note
    createdOn
    author {
      name
    }
  }
}</code></pre></div>
<p>Now create a test.</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootTest</span><span class="token punctuation">(</span>webEnvironment <span class="token operator">=</span> <span class="token class-name">SpringBootTest</span><span class="token punctuation">.</span><span class="token class-name">WebEnvironment</span><span class="token punctuation">.</span>RANDOM_PORT<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GraphQLNoteTest</span> <span class="token keyword">extends</span> <span class="token class-name">GraphQLBaseTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">GraphQLTestTemplate</span> graphQLTestTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">findNotes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

        <span class="token class-name">GraphQLResponse</span> findResponse <span class="token operator">=</span> graphQLTestTemplate<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span><span class="token string">"queries/find-notes.graphql"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertTrue</span><span class="token punctuation">(</span>findResponse<span class="token punctuation">.</span><span class="token function">isOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// asserts to check the content</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>That is all, of course you should add some assert to check the content as well. For more details check out the <a href="https://github.com/npalm/blog-graphql-spring-service">GitHub</a> repo of this blog.</p>
<h3 id="some-thoughts"><a href="#some-thoughts" aria-label="some thoughts permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Some thoughts</h3>
<p>The example above shows how you can enable your Spring Boot service with a GraphQL API. Adding a GraphQL layer to your existing (simple) service is fairly easy with the tools. But GraphQL will become really powerful when you combine multiple (REST) API in one GraphQL endpoint to create a fluent and understandable API.</p>
<p>If a java based approach is in that case the best way to go, I don‚Äôt know yet. In that case it could be interesting to dive into <a href="https://github.com/google/rejoiner">Rejoiner</a>.</p></div></section></article></main></div><footer class="Footer__FooterWrapper-sc-1oxe0wr-0 hFicPH"><nav><div class="footer-col"><h5 class="footer-title">040 code ¬© 2019</h5><span class="footer-item">Build with <i></i><a class="footer-link" href="https://www.gatsbyjs.org/">Gatsby</a></span></div><div class="footer-col"><h5 class="footer-title">Blog</h5><span class="footer-item"><a class="footer-link" href="/">home</a></span><span class="footer-item"><a class="footer-link" href="/about">about</a></span></div><div class="footer-col"><h5 class="footer-title">Source</h5><span class="footer-item"><i></i><a class="footer-link" href="https://github.com/040code/">Github</a></span></div></nav></footer></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-97020149-1', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2019/03/21/spring-boot-graphql";window.webpackCompilationHash="5922713c92655645bc49";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-5643697e2de9bcce0385.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-c4fe219a301439484a06.js"],"component---src-templates-blog-list-template-js":["/component---src-templates-blog-list-template-js-3478508ec23c2934e4f1.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-658161403c49a8a1208a.js"],"component---src-templates-page-js":["/component---src-templates-page-js-7e7e89f412e118251bb2.js"],"component---src-templates-tags-js":["/component---src-templates-tags-js-5a23d2283ad3d5c31166.js"],"component---src-templates-authors-js":["/component---src-templates-authors-js-c6344b2044878ea20b55.js"],"component---src-pages-404-js":["/component---src-pages-404-js-97ff63f7f4b2c8c3c88f.js"]};/*]]>*/</script><script src="/webpack-runtime-13449825e32741877b57.js" async=""></script><script src="/commons-7e3c10fcd1b3528eff3a.js" async=""></script><script src="/component---src-templates-blog-post-js-658161403c49a8a1208a.js" async=""></script><script src="/app-5643697e2de9bcce0385.js" async=""></script></body></html>